apiVersion: v1alpha
kind: cypress
defaults:
  mode: docker
sauce:
  metadata:
    tags:
      - e2e
      - release team
      - kitchen-sink
    build: Release $CI_COMMIT_SHORT_SHA
  region: us-west-1
defaults:
  mode: sauce
cypress:
  configFile: cypress.config.js
  version: 9.7.0
rootDir: ./
suites:
  - name: "kitchen-sink-chrome"
    shard: spec
    browser: "chrome"
    config:
      specPattern: [ "cypress/**/*.*" ]
      excludeSpecPattern: ["cypress/e2e/failing/*.*"]
  - name: "kitchen-sink-firefox"
    browser: "firefox"
    config:
      specPattern: [ "cypress/**/*.*" ]
      excludeSpecPattern: ["cypress/e2e/failing/*.*"]

docker:
  image: saucelabs/stt-cypress-mocha-node:local
