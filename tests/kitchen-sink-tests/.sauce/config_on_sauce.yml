apiVersion: v1
kind: cypress
sauce:
  concurrency: 10
  metadata:
    tags:
      - e2e
      - release team
      - kitchen-sink
    build: Release $CI_COMMIT_SHORT_SHA
  region: us-west-1
defaults:
  mode: sauce
cypress:
  configFile: cypress.config.js
  version: 12.3.0
rootDir: ./
suites:
  - name: "kitchen-sink - chrome - on Sauce (Windows)"
    platformName: "Windows 11"
    browser: "chrome"
    shard: concurrency
    config:
      testingType: "e2e"
      specPattern: [ "**/*cy.js" ]
      excludeSpecPattern: ["cypress/e2e/failing/todo.cy.js"]
  - name: "kitchen-sink - firefox - on Sauce (Windows)"
    platformName: "Windows 11"
    browser: "chrome"
    shard: concurrency
    config:
      testingType: "e2e"
      specPattern: [ "**/*cy.js" ]
      excludeSpecPattern: ["cypress/e2e/failing/todo.cy.js"]

npm:
  packages:
    cypress-plugin-steps: '1.1.0'